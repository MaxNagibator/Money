@page "/"

<PageTitle>Проект «Филочки»</PageTitle>

<MudText Align="Align.Center"
         Class="mb-4"
         Typo="Typo.h5">
    Проект «Филочки»
</MudText>

<MudAlert Class="mb-4"
          ContentAlignment="HorizontalAlignment.Center"
          Icon="@Icons.Material.Rounded.Info"
          Severity="Severity.Info">
    <strong>Важно:</strong> Этот проект поможет вам контролировать свои финансы и избежать ненужных трат!
</MudAlert>

<MudCard Class="mb-4">
    <MudCardContent>
        <MudStack AlignItems="AlignItems.Center"
                  Row
                  Spacing="6">
            <MudIcon Color="Color.Error"
                     Icon="@Icons.Material.Rounded.Favorite"
                     Size="Size.Large" />
            <MudText Align="Align.Justify"
                     Typo="Typo.body1">
                Завел очередную любовницу, но не знаешь, сколько на неё тратишь?
                Каждый вечер в ресторане, подарки на праздники – всё это складывается в круглую сумму,
                а ты даже не ведёшь учёт.
            </MudText>
        </MudStack>
    </MudCardContent>
</MudCard>

<MudCard Class="mb-4">
    <MudCardContent>
        <MudStack AlignItems="AlignItems.Center"
                  Row
                  Spacing="6">
            <MudIcon Color="Color.Success"
                     Icon="@Icons.Material.Rounded.PhoneIphone"
                     Size="Size.Large" />
            <MudText Align="Align.Justify"
                     Typo="Typo.body1">
                Взял кредит на новый iPhone, но уже забыл про него?
                Каждый месяц приходит уведомление, а ты всё надеешься, что как-то обойдёшься без лишних трат.
            </MudText>
        </MudStack>
    </MudCardContent>
</MudCard>

<MudCard Class="mb-4">
    <MudCardContent>
        <MudStack AlignItems="AlignItems.Center"
                  Row
                  Spacing="6">
            <MudIcon Color="Color.Warning"
                     Icon="@Icons.Material.Rounded.MoneyOff"
                     Size="Size.Large" />
            <MudText Align="Align.Justify"
                     Typo="Typo.body1">
                Друзья постоянно просят вернуть сотку, а ты у них не занимал?
                Кажется, что это мелочь, но в итоге накапливается целая куча долгов,
                и ты начинаешь терять счёт, кому что должен.
            </MudText>
        </MudStack>
    </MudCardContent>
</MudCard>

<MudCard Class="mb-4">
    <MudCardContent>
        <MudStack AlignItems="AlignItems.Center"
                  Row
                  Spacing="6">
            <MudIcon Color="Color.Error"
                     Icon="@Icons.Material.Rounded.TrendingDown"
                     Size="Size.Large" />
            <MudText Align="Align.Justify"
                     Typo="Typo.body1">
                Всё это приводит к тому, что доходы начинают таять, а ты даже не понимаешь, куда уходят деньги.
                Время пересмотреть свои расходы.
            </MudText>
        </MudStack>
    </MudCardContent>
</MudCard>

<MudText Align="Align.Center"
         Class="my-4"
         Typo="Typo.h6">
    Но решение всех проблем – это проект «Филочки»!
</MudText>

<MudCard Class="mb-4">
    <MudCardContent>
        <MudStack AlignItems="AlignItems.Center"
                  Row
                  Spacing="6">
            <MudIcon Color="Color.Tertiary"
                     Icon="@Icons.Material.Rounded.Assessment"
                     Size="Size.Large" />
            <MudText Align="Align.Justify"
                     Typo="Typo.body1">
                Твой личный финансовый помощник позволит не только гибко следить за доходами и расходами,
                но и поможет планировать бюджет и контролировать свои траты.
                С помощью «Филочки» ты сможешь легко отслеживать, куда уходят твои деньги,
                и находить способы сэкономить.
            </MudText>
        </MudStack>
    </MudCardContent>
</MudCard>

<MudText Align="Align.Center"
         Class="mt-4"
         Typo="Typo.h6">
    Время взять под контроль свои деньги и перестать жить в долг!
</MudText>

<MudCard Class="mt-6"
         Elevation="2">
    <MudCardContent>
        <MudStack AlignItems="AlignItems.Center"
                  Row
                  Spacing="3">
            <MudIcon Color="Color.Primary"
                     Icon="@Icons.Material.Rounded.History"
                     Size="Size.Medium" />
            <MudText Typo="Typo.h6"
                     Color="Color.Primary">
                История изменений
            </MudText>
            <MudChip Color="Color.Primary"
                     Size="Size.Small"
                     T="string"
                     Text="@($"v.{GetCurrentVersion()}")" />
            <MudSpacer />
            <MudButton Color="Color.Primary"
                       EndIcon="@(_historyVisible ? Icons.Material.Rounded.ExpandLess : Icons.Material.Rounded.ExpandMore)"
                       OnClick="ChangeHistoryVisible"
                       Size="Size.Small"
                       Variant="Variant.Text">
                @(_historyVisible ? "Скрыть" : "Показать")
            </MudButton>
        </MudStack>
    </MudCardContent>
</MudCard>

<MudCollapse Expanded="_historyVisible">
    <MudCard Class="mt-3"
             Elevation="1">
        <MudCardContent>
            <MudTimeline Reverse="false"
                         TimelineOrientation="TimelineOrientation.Vertical"
                         TimelinePosition="TimelinePosition.Start">
                @foreach (var entry in _versionHistory)
                {
                    <MudTimelineItem Color="@GetVersionColor(entry)"
                                     Icon="@GetVersionIcon(entry)"
                                     Size="Size.Small">
                        <ItemContent>
                            <MudPaper Class="pa-4 mb-3"
                                      Elevation="0"
                                      Style="border-left: 3px solid var(--mud-palette-primary);">
                                <MudStack Spacing="2">
                                    <MudStack AlignItems="AlignItems.Center"
                                              Row
                                              Spacing="2"
                                              Wrap="Wrap.Wrap">
                                        <MudChip Color="@GetVersionChipColor(entry)"
                                                 Size="Size.Small"
                                                 T="string"
                                                 Text="@($"v.{entry.Version}")" />
                                        <MudText Color="Color.Secondary"
                                                 Typo="Typo.body2">
                                            @entry.Date.ToString("dd.MM.yyyy")
                                        </MudText>
                                        <MudSpacer />
                                        @if (entry.Changes.Length > 0)
                                        {
                                            <MudChip Color="Color.Default"
                                                     Icon="@Icons.Material.Rounded.ListAlt"
                                                     Size="Size.Small"
                                                     T="string"
                                                     Text="@($"{entry.Changes.Length} изменений")" />
                                        }
                                    </MudStack>

                                    @if (entry.Changes.Length > 0)
                                    {
                                        <MudStack Spacing="1">
                                            @foreach (var change in entry.Changes)
                                            {
                                                <MudStack AlignItems="AlignItems.Center"
                                                          Row
                                                          Spacing="2">
                                                    <MudIcon Color="@GetChangeTypeColor(change.Type)"
                                                             Icon="@GetChangeTypeIcon(change.Type)"
                                                             Size="Size.Small"
                                                             Style="margin-top: 2px;" />
                                                    <MudText Style="line-height: 1.4;"
                                                             Typo="Typo.body2">
                                                        @change.Description
                                                    </MudText>
                                                </MudStack>
                                            }
                                        </MudStack>
                                    }
                                </MudStack>
                            </MudPaper>
                        </ItemContent>
                    </MudTimelineItem>
                }
            </MudTimeline>
        </MudCardContent>
    </MudCard>
</MudCollapse>
